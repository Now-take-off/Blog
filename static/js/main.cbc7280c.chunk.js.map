{"version":3,"sources":["App.js","index.js"],"names":["App","Crood","x","y","this","ShootingStar","init","final","size","speed","onDistory","dur","Math","sqrt","pow","pass","prev","copy","now","ctx","delta","min","percent","setCrood","strokeStyle","lineCap","lineWidth","beginPath","moveTo","lineTo","stroke","distory","MeteorShower","cvs","stars","stop","playing","angle","PI","distance","random","width","cos","sin","star","remove","filter","s","length","push","createStar","forEach","draw","Date","getTime","last","_tick","cancelAnimationFrame","T","requestAnimationFrame","save","fillStyle","globalCompositeOperation","fillRect","height","restore","update","tick","document","querySelector","getContext","start","className","id","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cbc7280c.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport './App.css'\n\nclass App extends Component {\n  componentDidMount() {\n    // 坐标\n    class Crood {\n      constructor(x = 0, y = 0) {\n        this.x = x\n        this.y = y\n      }\n      setCrood(x, y) {\n        this.x = x\n        this.y = y\n      }\n      copy() {\n        return new Crood(this.x, this.y)\n      }\n    }\n\n    // 流星\n    class ShootingStar {\n      constructor(\n        init = new Crood(),\n        final = new Crood(),\n        size = 3,\n        speed = 200,\n        onDistory = null\n      ) {\n        this.init = init // 初始位置\n        this.final = final // 最终位置\n        this.size = size // 大小\n        this.speed = speed // 速度：像素/s\n\n        // 飞行总时间\n        this.dur =\n          (Math.sqrt(\n            Math.pow(this.final.x - this.init.x, 2) +\n              Math.pow(this.final.y - this.init.y, 2)\n          ) *\n            1000) /\n          this.speed\n\n        this.pass = 0 // 已过去的时间\n        this.prev = this.init.copy() // 上一帧位置\n        this.now = this.init.copy() // 当前位置\n        this.onDistory = onDistory\n      }\n      draw(ctx, delta) {\n        this.pass += delta\n        this.pass = Math.min(this.pass, this.dur)\n\n        let percent = this.pass / this.dur\n\n        this.now.setCrood(\n          this.init.x + (this.final.x - this.init.x) * percent,\n          this.init.y + (this.final.y - this.init.y) * percent\n        )\n\n        // canvas\n        ctx.strokeStyle = '#fff'\n        ctx.lineCap = 'round'\n        ctx.lineWidth = this.size\n        ctx.beginPath()\n        ctx.moveTo(this.now.x, this.now.y)\n        ctx.lineTo(this.prev.x, this.prev.y)\n        ctx.stroke()\n\n        this.prev.setCrood(this.now.x, this.now.y)\n        if (this.pass === this.dur) {\n          this.distory()\n        }\n      }\n      distory() {\n        this.onDistory && this.onDistory()\n      }\n    }\n\n    class MeteorShower {\n      constructor(cvs, ctx) {\n        this.cvs = cvs\n        this.ctx = ctx\n        this.stars = []\n\n        this.stop = false\n        this.playing = false\n      }\n\n      createStar() {\n        let angle = Math.PI / 3\n        let distance = Math.random() * 400\n        let init = new Crood(\n          (Math.random() * this.cvs.width) | 0,\n          (Math.random() * 100) | 0\n        )\n        let final = new Crood(\n          init.x + distance * Math.cos(angle),\n          init.y + distance * Math.sin(angle)\n        )\n        let size = Math.random() * 2\n        let speed = Math.random() * 400 + 100\n        let star = new ShootingStar(init, final, size, speed, () => {\n          this.remove(star)\n        })\n        return star\n      }\n\n      remove(star) {\n        this.stars = this.stars.filter((s) => {\n          return s !== star\n        })\n      }\n\n      update(delta) {\n        if (!this.stop && this.stars.length < 20) {\n          this.stars.push(this.createStar())\n        }\n        this.stars.forEach((star) => {\n          star.draw(this.ctx, delta)\n        })\n      }\n\n      tick() {\n        if (this.playing) return\n        this.playing = true\n\n        let now = new Date().getTime()\n        let last = now\n        let delta\n\n        let _tick = () => {\n          if (this.stop && this.stars.length === 0) {\n            cancelAnimationFrame(this.T)\n            this.playing = false\n            return\n          }\n\n          delta = now - last\n          delta = delta > 500 ? 30 : delta < 16 ? 16 : delta\n          last = now\n          // console.log(delta);\n\n          this.T = requestAnimationFrame(_tick)\n\n          ctx.save()\n          // ctx.fillStyle = 'rgba(0,0,0,0.2)' // 每一帧用 “半透明” 的背景色清除画布\n          ctx.fillStyle = 'rgba(0,0,0,0.8)'\n          ctx.globalCompositeOperation = 'destination-in'\n          ctx.fillRect(0, 0, cvs.width, cvs.height)\n          ctx.restore()\n          this.update(delta)\n        }\n        _tick()\n      }\n\n      start() {\n        this.stop = false\n        this.tick()\n      }\n\n      stop() {\n        this.stop = true\n      }\n    }\n\n    // effet\n    let cvs = document.querySelector('canvas')\n    let ctx = cvs.getContext('2d')\n\n    let meteorShower = new MeteorShower(cvs, ctx)\n    meteorShower.start()\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <canvas id=\"canvas\" width=\"1920\" height=\"1920\">\n          您的浏览器不支持canvas，请更换浏览器.\n        </canvas>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}